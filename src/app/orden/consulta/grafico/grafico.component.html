<div style="height: 17rem;" *ngIf="acceso">
  <span style="margin-right: 2rem">
    <mat-form-field>
      <mat-select placeholder="seleccione una orden" (selectionChange)="consultarPreguntas()" [(ngModel)]="selectedOrden">
        <mat-option *ngFor="let orden of ordenes" [value]="orden.idOrden">
          {{ orden.nombre }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field>
      <mat-select placeholder="seleccione un tipo de grafica" [(ngModel)]="selectedGrafica">
        <mat-option [value]="1">
          Grafica de barras
        </mat-option>
        <mat-option [value]="2">
          Grafica de pastel
        </mat-option>
      </mat-select>
    </mat-form-field>
  </span>
  <div>
    <mat-form-field style="width: 100%;" *ngIf="preguntas && preguntas.length">
      <mat-select placeholder="seleccione una pregunta" [(ngModel)]="selectedPregunta">
        <mat-option *ngFor="let pregunta of preguntas" [value]="pregunta.idPregunta">
          {{ pregunta.descripcion }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <div>
    <button
    (click)="consultar()"
    [disabled]="!preguntas || !preguntas.length"
    style="margin-left: 1rem"
    class="btn btn-default"
  >
    Ver grafica
  </button>
  </div>
  <div>
    <mat-spinner *ngIf="cargando"></mat-spinner>
  </div>
  <div>
  </div>
</div>
<div class="grafic-container" *ngIf="showGrafica">
  <ngx-charts-bar-vertical
  *ngIf="selectedGrafica == 1"
  [view]="view"
  [results]="datos"
  [gradient]="gradient"
  [xAxis]="showXAxis"
  [yAxis]="showYAxis"
  [legend]="showLegend"
  [showXAxisLabel]="showXAxisLabel"
  [showYAxisLabel]="showYAxisLabel"
  [xAxisLabel]="xAxisLabel"
  [yAxisLabel]="yAxisLabel"
  (select)="onSelect($event)">
</ngx-charts-bar-vertical>
<ngx-charts-pie-chart
*ngIf="selectedGrafica == 2"
  [view]="view"
  [results]="datos"
  [gradient]="gradient"
  [legend]="showLegend"
  [legendPosition]="legendPosition"
  [labels]="showLabels"
  [doughnut]="isDoughnut"
  (select)="onSelect($event)"
  (activate)="onActivate($event)"
  (deactivate)="onDeactivate($event)"
  >
</ngx-charts-pie-chart>
</div>
